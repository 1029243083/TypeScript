# 装饰器
## 解决的问题
装饰器，能够带来额为的信息，可以达到分离关注点
- 关注点的问题：在定义某个东西时，应该最清楚东西的情况
- 重复代码的问题

上述两个问题产生的根源：某些信息，在定义时，能够附加的信息量有限

装饰器的作用：为某些属性，类，参数，方法提供元数据信息(metadata)
元数据：描述数据的数据

### 装饰器的本质
在JS中，装饰器是一个函数，（装饰器是要参与运行的）

装饰器可以装饰：
 - 类
 - 成员（属性 + 方法）
 - 参数

 ## 类装饰器
 类装饰器的本质是一个函数，该函数接收一个参数，表示类本身
 使用装饰器```@得到一个函数```
 在TS中，如何约束一个变量为类
  - Function
  - ```new (参数) => object```

在TS中要使用装饰器，需要开启一个配置
装饰器函数的运行时间：在类定义之后直接运行
类装饰器的返回值
 - void : 仅运行函数
 - 返回一个新的类：会将新的类替换掉装饰目标
 
多个装饰器的情况
 - 会按照后加入先调用的顺序进行调用

## 成员装饰器
 - 属性：属性装饰器也是一个函数，该函数需要两个参数
  1. 如果是静态属性，则为类本身，如果是实例实现，则为类的原型
  2. 固定为一个字符串，表示属性名

 - 方法
  1. 如果是静态方法，则为来本身，如果是实例方法，则为类的原型
  2. 固定为一个字符串，表示方法名
  3. 属性描述对象(Object.defineProperty的第三个参数)

##  reflect-metadata库
可以更友好的调用装饰器

## class-validator 和 class-transformer 库
class-validator 用来做验证
class-transformer 用来把平面对象，转换成类


# 补充
 - 参数装饰器
 依赖注入，依赖倒置
 要全函数三个参数
 1. 如果方法是静态的，则为类本身，如果方法是实例方法，则为类的原型
 2. 方法名称
 3. 在参数列表中的索引

 - 关于TS自动注入数据
 如果安装了```reflect-metadata```并且导入了该库，并且在某个成员上添加了元数据，并且开启了，```emitDecoratorMetadata```.
 则TS在编译结果中，会将类型约束，作为元数据加入到相应的位置
 这样一来，TS的类型检查将有机会在运行时进行

 - AOP
 编程方式，属于面向对象开发
 将一些在业务中共同出现功能块，横向切分，已达到分离关注点的目的